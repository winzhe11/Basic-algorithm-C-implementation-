## 2.1.2 数组模拟栈，队列

*4月27日*

### 数组模拟

#### 题目描述

实现一个基于数组模拟的栈，栈初始为空，支持五种操作：

1. 向栈顶压入一个数；
2. 弹出栈顶的数；
3. 查询栈顶的数（若栈为空，返回 -1）；
4. 查询栈的当前元素个数；
5. 判断栈是否为空（若为空返回 `true`，否则返回 `false`）。

现在要对该栈进行 `N` 次操作，每次操作后输出对应操作的结果（若操作无返回值，则输出 "OK"）。

#### 输入格式

第一行包含整数 `N`，表示操作次数。

接下来 `N` 行，每行包含一个操作命令，操作命令可能为以下几种：

1. `"push x"`，表示向栈顶压入一个数 `x`。
2. `"pop"`，表示弹出栈顶的数。
3. `"top"`，表示查询栈顶的数。
4. `"size"`，表示查询栈的当前元素个数。
5. `"empty"`，表示判断栈是否为空。

#### 输出格式

共 `N` 行，每行输出对应操作的结果。

#### 数据范围

- `1 ≤ N ≤ 100000`
- 所有操作保证在栈非空时执行 `pop` 和 `top` 合法，数据范围为 `-10000 ≤ x ≤ 10000`。

#### 输入样例

```plaintext
10
push 5
push 3
top
size
pop
empty
pop
empty
push 4
top
```

#### 输出样例

```plaintext
3
2
OK
false
OK
true
OK
4
```

#### 代码

```c++
#include <iostream>
using namespace std;

const int N = 1e5 + 10;
int stk[N], tt = 0; // 初始化栈顶指针为0

void push(int x) {
	stk[++tt] = x; // 先移动指针再赋值
}

void pop() {
	if (tt > 0)
		tt--; // 增加边界检查
}

void top() {
	if (tt == 0)
		cout << -1 << endl; // 增加换行符
	else
		cout << stk[tt] << endl;
}

void size() {
	cout << tt << endl; // 增加换行符
}

void empty() {
	cout << (tt == 0 ? "true" : "false") << endl; // 修正判断逻辑
}

int main() {
	int M;
	cin >> M;
	while (M--) {
		string str;
		int x;
		cin >> str;
		if (str == "push") {
			cin >> x;
			push(x);
			cout << "OK" << endl; // 增加push操作的输出
		} else if (str == "pop") {
			pop();
			cout << "OK" << endl; // 增加pop操作的输出
		} else if (str == "top")
			top();
		else if (str == "size")
			size();
		else if (str == "empty")
			empty();
	}
	return 0;
}
```

### 数组模拟队列

#### 题目描述

实现一个基于数组模拟的队列，队列初始为空，支持六种操作：

1. 向队尾插入一个数；
2. 从队头弹出一个数；
3. 查询队头的数（若队列为空，返回 -1）；
4. 查询队尾的数（若队列为空，返回 -1）；
5. 查询队列的当前元素个数；
6. 判断队列是否为空（若为空返回 `true`，否则返回 `false`）。

现在要对该队列进行 `N` 次操作，每次操作后输出对应操作的结果（若操作无返回值，则输出 "OK"）。

#### 输入格式

第一行包含整数 `N`，表示操作次数。

接下来 `N` 行，每行包含一个操作命令，操作命令可能为以下几种：

1. `"push x"`，表示向队尾插入一个数 `x`。
2. `"pop"`，表示从队头弹出一个数。
3. `"front"`，表示查询队头的数。
4. `"back"`，表示查询队尾的数。
5. `"size"`，表示查询队列的当前元素个数。
6. `"empty"`，表示判断队列是否为空。

#### 输出格式

共 `N` 行，每行输出对应操作的结果。

#### 数据范围

- `1 ≤ N ≤ 100000`
- 所有操作保证在队列非空时执行 `pop`、`front` 和 `back` 合法，数据范围为 `-10000 ≤ x ≤ 10000`。

#### 输入样例

```plaintext
10
push 5
push 3
front
back
pop
size
empty
pop
empty
push 4
```

#### 输出样例

```plaintext
5
3
OK
1
false
OK
true
OK
```

#### 代码

```c++
#include <iostream>

using namespace std;

const int N = 1e5 + 10;
int q[N], tt = -1, hh = 0;

void push(int x) {
	q[++tt] = x;
}

void pop() {
	hh++;
	cout << "OK" << endl;
}

void front() {
	cout << q[hh] << endl;
}

void back() {
	cout << q[tt] << endl;
}

void size() {
	cout << tt - hh + 1 << endl;
}

void empty() {
	cout << ((tt - hh < 0) ? "true" : "false") << endl;
}

int main() {
	int M;
	cin >> M;
	while (M--) {
		string str;
		int x;
		cin >> str;
		if (str == "push") {
			cin >> x;
			push(x);
		} else if (str == "pop")
			pop();
		else if (str == "front")
			front();
		else if (str == "back")
			back();
		else if (str == "size")
			size();
		else if (str == "empty")
			empty();
	}
	return 0;
}
```

